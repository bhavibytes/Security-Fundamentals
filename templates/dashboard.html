{% extends "base.html" %}

{% block title %}Dashboard - Cybersecurity Learning App{% endblock %}

{% block content %}
<div style="text-align: center; margin-bottom: 40px;">
    <h1 style="color: #2d3748; margin-bottom: 10px;">Welcome, {{ user.username }}!</h1>
    <p style="color: #4a5568;">Your secure dashboard</p>
    <span class="security-badge badge-{{ user.role }}">{{ user.role }}</span>
</div>

<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-number">{{ user.username|length }}</div>
        <div class="stat-label">Username Length</div>
    </div>
    <div class="stat-card">
        <div class="stat-number">{{ user.role|title }}</div>
        <div class="stat-label">Account Role</div>
    </div>
    <div class="stat-card">
        <div class="stat-number" style="font-size: 14px;">{{ user.created_at[:10] if user.created_at else 'Unknown' }}
        </div>
        <div class="stat-label">Account Created</div>
    </div>
    <div class="stat-card">
        <div class="stat-number" style="font-size: 14px;">{{ user.last_login[:10] if user.last_login else 'Never' }}
        </div>
        <div class="stat-label">Last Login</div>
    </div>
</div>

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 40px;">
    <div class="card">
        <h3>ğŸ” Account Security</h3>
        <ul style="list-style: none; padding: 0;">
            <li>âœ… Password securely hashed with bcrypt</li>
            <li>âœ… Session management active</li>
            <li>âœ… Rate limiting enabled</li>
            <li>âœ… Audit logging enabled</li>
        </ul>
    </div>

    <div class="card">
        <h3>ğŸ›¡ï¸ Current Session</h3>
        <p style="color: #4a5568; font-size: 14px; line-height: 1.6;">
            <strong>Session Status:</strong> Active<br>
            <strong>Session Timeout:</strong> 30 minutes<br>
            <strong>Security Level:</strong> High<br>
            <strong>Last Activity:</strong> Just now
        </p>
    </div>

    <div class="card">
        <h3>ğŸ“Š Security Features</h3>
        <ul style="list-style: none; padding: 0;">
            <li>ğŸ”’ Input validation & sanitization</li>
            <li>ğŸŒ Secure HTTP-only cookies</li>
            <li>ğŸ“‹ Comprehensive audit logging</li>
            <li>ğŸš« CSRF protection</li>
        </ul>
    </div>
</div>

<div
    style="margin-top: 40px; padding: 30px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px; color: white;">
    <h3 style="margin-bottom: 20px;">ğŸ¯ Learning Objectives</h3>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
        <div>
            <h4 style="margin-bottom: 10px;">Authentication</h4>
            <p style="font-size: 14px; opacity: 0.9;">
                Secure login, password hashing, session management
            </p>
        </div>
        <div>
            <h4 style="margin-bottom: 10px;">Authorization</h4>
            <p style="font-size: 14px; opacity: 0.9;">
                Role-based access control, permission management
            </p>
        </div>
        <div>
            <h4 style="margin-bottom: 10px;">Defense</h4>
            <p style="font-size: 14px; opacity: 0.9;">
                Input validation, XSS prevention, SQL injection protection
            </p>
        </div>
        <div>
            <h4 style="margin-bottom: 10px;">Monitoring</h4>
            <p style="font-size: 14px; opacity: 0.9;">
                Audit logging, rate limiting, security event tracking
            </p>
        </div>
    </div>
</div>

{% if user.role == 'admin' %}
<div style="margin-top: 40px; text-align: center;">
    <a href="{{ url_for('admin_panel') }}" class="btn btn-primary">ğŸ”§ Admin Panel</a>
</div>
{% endif %}

<div style="margin-top: 40px; text-align: center;">
    <h3 style="color: #2d3748; margin-bottom: 20px;">Security Testing</h3>
    <p style="color: #4a5568; margin-bottom: 20px;">
        Try these security tests to see our protections in action:
    </p>
    <div
        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
        <div style="padding: 15px; background: #f7fafc; border-radius: 8px;">
            <strong>SQL Injection:</strong><br>
            <small>Try entering SQL commands in forms</small>
        </div>
        <div style="padding: 15px; background: #f7fafc; border-radius: 8px;">
            <strong>XSS Attempts:</strong><br>
            <small>Try entering JavaScript code</small>
        </div>
        <div style="padding: 15px; background: #f7fafc; border-radius: 8px;">
            <strong>Brute Force:</strong><br>
            <small>Try multiple failed logins</small>
        </div>
        <div style="padding: 15px; background: #f7fafc; border-radius: 8px;">
            <strong>Session Hijacking:</strong><br>
            <small>Check secure cookie settings</small>
        </div>
    </div>
</div>
{% endblock %}