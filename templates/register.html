{% extends "base.html" %}

{% block title %}Register - Cybersecurity Learning App{% endblock %}

{% block content %}
<div style="max-width: 500px; margin: 0 auto;">
    <h2 style="text-align: center; color: #2d3748; margin-bottom: 30px;">Create Account</h2>
    
    <form method="POST">
        <div class="form-group">
            <label for="username">Username</label>
            <input type="text" id="username" name="username" required 
                   placeholder="Choose a username (3-20 characters)"
                   pattern="^[a-zA-Z0-9_]+$" 
                   title="Username can only contain letters, numbers, and underscores">
            <small style="color: #718096; font-size: 12px;">
                3-20 characters, letters, numbers, and underscores only
            </small>
        </div>
        
        <div class="form-group">
            <label for="email">Email</label>
            <input type="email" id="email" name="email" required 
                   placeholder="your.email@example.com">
            <small style="color: #718096; font-size: 12px;">
                Valid email address required
            </small>
        </div>
        
        <div class="form-group">
            <label for="password">Password</label>
            <input type="password" id="password" name="password" required 
                   placeholder="Create a strong password"
                   minlength="12" required>
            <small style="color: #718096; font-size: 12px;">
                Minimum 12 characters with uppercase, lowercase, numbers, and special characters
            </small>
        </div>
        
        <div class="form-group">
            <label for="confirm_password">Confirm Password</label>
            <input type="password" id="confirm_password" name="confirm_password" required 
                   placeholder="Confirm your password">
        </div>
        
        {% if errors %}
            <div class="alert alert-error">
                <strong>Registration failed:</strong>
                <ul style="margin: 10px 0 0 20px;">
                    {% for error in errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            </div>
        {% endif %}
        
        <div style="margin-top: 30px;">
            <button type="submit" class="btn btn-primary" style="width: 100%;">Create Account</button>
        </div>
    </form>
    
    <div style="text-align: center; margin-top: 20px;">
        <p style="color: #4a5568;">
            Already have an account? 
            <a href="{{ url_for('login') }}" style="color: #667eea;">Login here</a>
        </p>
    </div>
</div>

<div style="max-width: 500px; margin: 40px auto; padding: 20px; background: #f7fafc; border-radius: 8px;">
    <h3 style="color: #2d3748; margin-bottom: 15px;">üîê Password Requirements</h3>
    <ul style="color: #4a5568; font-size: 14px; line-height: 1.6;">
        <li>At least 12 characters long</li>
        <li>Contains uppercase letters (A-Z)</li>
        <li>Contains lowercase letters (a-z)</li>
        <li>Contains numbers (0-9)</li>
        <li>Contains special characters (!@#$%^&* etc.)</li>
        <li>Not common patterns (password, 123456, qwerty, etc.)</li>
    </ul>
</div>

<div style="max-width: 500px; margin: 20px auto; padding: 20px; background: #edf2f7; border-radius: 8px;">
    <h3 style="color: #2d3748; margin-bottom: 15px;">üõ°Ô∏è Security Features</h3>
    <p style="color: #4a5568; font-size: 14px; line-height: 1.6;">
        Your password is securely hashed using bcrypt with unique salts. 
        We never store plain text passwords and implement multiple layers of security 
        to protect your account.
    </p>
</div>

<script>
document.getElementById('confirm_password').addEventListener('input', function() {
    const password = document.getElementById('password').value;
    const confirmPassword = this.value;
    
    if (password !== confirmPassword) {
        this.setCustomValidity('Passwords do not match');
    } else {
        this.setCustomValidity('');
    }
});

document.getElementById('password').addEventListener('input', function() {
    const password = this.value;
    const confirmField = document.getElementById('confirm_password');
    
    if (confirmField.value && password !== confirmField.value) {
        confirmField.setCustomValidity('Passwords do not match');
    } else {
        confirmField.setCustomValidity('');
    }
});
</script>
{% endblock %}
